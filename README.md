# Order Processing System (Spring Boot + Kafka)

This project demonstrates a microservices-inspired architecture using Spring Boot, Apache Kafka, and PostgreSQL. It simulates an order lifecycle through the following services:

- **Order Service**: Handles REST API for order creation and persistence.
- **Inventory Service**: Listens to order events, checks stock, and publishes inventory updates.
- **Payment Service**: Processes payments and emits payment status events.
- **Notification Service**: Listens to inventory and payment events and logs notifications.
- **Order Status Updater**: Updates the order status based on inventory and payment events.

---

## Tech Stack

- Java 17
- Spring Boot 3.4
- Spring Data JPA
- Spring Kafka
- PostgreSQL
- Kafka (Bitnami)
- Kafdrop (Kafka UI)
- Gson (for serialization)

---

## Architecture Overview
```
src/main/java/com/example/order_processing_system
├── controller         REST endpoints (OrderController)
├── model              Entities and DTOs
├── repository         JPA Repositories
├── service            Business logic, Kafka Producers/Consumers
├── config             App config 
└── OrderProcessingSystemApplication.java
```

## API Endpoints
```
| Method | Endpoint           | Description              |
| ------ | ------------------ | ------------------------ |
| POST   | `/api/orders`      | Create a new order       |
| GET    | `/api/orders`      | Get all orders           |
| GET    | `/api/orders/{id}` | Get order by ID          |
| PUT    | `/api/orders/{id}` | Update an existing order |
| DELETE | `/api/orders/{id}` | Delete an order          |
```

## Request Payload Example:
```{
  "product": "Laptop",
  "quantity": 2,
  "price": 999.99
}
```

## Kafka Topics:
```
| Topic Name          | Description                        |
| ------------------- | ---------------------------------- |
| `order.created`     | Emitted after new order is created |
| `inventory.updated` | Result of stock validation         |
| `payment.processed` | Result of payment transaction      |
```


## Setup Instructions
Prerequisites
Java 17+
Maven
Docker + Docker Compose

## Clone the Repository
```
git clone https://github.com/your-username/order-processing-system.git
cd order-processing-system
```

## Start Kafka & Kafdrop
docker-compose up -d
Kafka Broker: localhost:29092

Kafdrop UI: http://localhost:9000

## Run the Application
mvn spring-boot:run

## Test the API
Use Postman, curl, or Swagger to test the /api/orders endpoint.

## Database
Database: PostgreSQL

Schema: Auto-generated by Hibernate

Connection: Set in application.properties
```
spring.datasource.url=jdbc:postgresql://localhost:5432/orders
spring.datasource.username=postgres
spring.datasource.password=postgres
```

## Notifications
The NotificationService listens to:

inventory.updated

payment.processed

Notifications are currently logged to the console. You can later extend this to send emails or Slack messages.

## Order Status Flow
Order status is managed through event consumption:

On create → PENDING

Inventory OK → IN_STOCK, else OUT_OF_STOCK

Payment success → PAID, else PAYMENT_FAILED

##  Future Improvements
Add observability via Prometheus + Grafana

Add email notifications via Spring Mail

Add Retry logic for failed services

Deploy using Kubernetes
